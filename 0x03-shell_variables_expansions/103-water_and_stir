#!/bin/bash

# Custom bases
WATER_BASE="ewwatratewa"
STIR_BASE="ti.itirtrtr"
BESTCHOL_BASE="shtbeolhc"

to_decimal() {
    local number="$1"
    local base="$2"
    local len="${#base}"
    local dec=0
    local i char idx
    for (( i=0; i<${#number}; i++ )); do
        char="${number:$i:1}"
        idx=$(expr index "$base" "$char")
        idx=$((idx-1))
        dec=$((dec*len+idx))
    done
    echo "$dec"
}

from_decimal() {
    local number="$1"
    local base="$2"
    local len="${#base}"
    local result=""
    local rem
    if [[ "$number" -eq 0 ]]; then
        echo "${base:0:1}"
        return
    fi
    while [[ "$number" -gt 0 ]]; do
        rem=$((number % len))
        result="${base:rem:1}$result"
        number=$((number / len))
    done
    echo "$result"
}

water_dec=$(to_decimal "$WATER" "$WATER_BASE")
stir_dec=$(to_decimal "$STIR" "$STIR_BASE")
sum=$((water_dec + stir_dec))
from_decimal "$sum" "$BESTCHOL_BASE"
